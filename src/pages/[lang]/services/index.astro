---
import Layout from '../../../layouts/Layout.astro';

import '../../../styles/global.css';

// i18n Settings  //
import { getLangFromUrl, getStaticPaths } from '../../../i18n/utils/i18n';
import { servicesTexts as enServicesTexts } from '../../../i18n/en/services';
import { servicesTexts as esServicesTexts } from '../../../i18n/es/services';
import Header from '../../../components/layout/Header.astro';
import { ChevronRight } from 'lucide-react';

export { getStaticPaths };

const url = new URL(Astro.url);
const lang = getLangFromUrl(url);

const servicesTextsByLang = {
    en: enServicesTexts,
    es: esServicesTexts,
};
const texts = servicesTextsByLang[lang] || enServicesTexts;
const servicesAPI = servicesTextsByLang[lang].services;

export const prerender = true
---

<Layout>
  <head>
    <title> {texts.title} </title>
  </head>
  <Header lang={lang} />
  <section class="w-full pt-20 px-4 max-w-7xl mx-auto">

    <h2
      class="global-section-text mb-8 text-center"
      transition:name="title-services"
    >
      {texts.subtitle}
    </h2>
    <!-- breadcrumb -->
    <div class="flex items-center mb-10 text-sm text-gray-500">
      <span>Services</span>
      <div class="mx-2 h-4 w-4"> <ChevronRight /> </div>
    </div>

    <div class="grid gap-8 md:grid-cols-2">
    { 
      servicesAPI.map((service) => (
        <div class="border border-gray-200 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
          <h3 
            class="text-xl font-medium mb-2"
            transition:name={service.id}
          >
            {service.title}
          </h3>
          <p
            class="text-gray-600 mb-4 line-clamp-3"
          >
            {service.description}
          </p>
          <a
            class="inline-block text-sm text-blue-600 font-medium hover:underline"
            href={`/${lang}/services/${service.id}`}
          >
            Learn more â†’
          </a>
        </div>
      ))
    }
    </div>

  </section>
</Layout>