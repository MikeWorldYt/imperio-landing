---
import Layout from '../../../layouts/Layout.astro';

import '../../../styles/global.css';

// i18n Settings  //
import { getLangFromUrl, getStaticPaths } from '../../../i18n/utils/i18n';
import { servicesTexts as enServicesTexts } from '../../../i18n/en/services';
import { servicesTexts as esServicesTexts } from '../../../i18n/es/services';
import Header from '../../../components/layout/Header.astro';
import { ChevronRight } from 'lucide-react';

export { getStaticPaths };

const url = new URL(Astro.url);
const lang = getLangFromUrl(url);

const servicesTextsByLang = {
    en: enServicesTexts,
    es: esServicesTexts,
};
const texts = servicesTextsByLang[lang] || enServicesTexts;
const servicesAPI = servicesTextsByLang[lang].services;

export const prerender = true
---

<Layout>
  <head>
    <title> {texts.title} </title>
  </head>
  <Header lang={lang} />
  <section class="w-full pt-20 px-4 max-w-7xl mx-auto">

    <h2
      class="global-section-text mb-8 text-center"
      transition:name="title-services"
    >
      {texts.subtitle}
    </h2>
    <!-- breadcrumb -->
    <div class="breadcrumb">
      <span> Services </span>
      <ChevronRight className="mx-2 h-6" />
    </div>

    <div class="grid gap-8 md:grid-cols-2">
    { 
      servicesAPI.map((service) => (
        <div class="h-48 group relative flex flex-col md:flex-row items-stretch border border-gray-200 rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition duration-300 bg-red-600/40">
          <!-- Image -->
          <div class="w-full md:w-64 flex-shrink-0 transition-all duration-300 md:group-hover:w-32">
            <img
              src={service.image}
              alt={service.title}
              class="w-full h-full object-cover"
            />
          </div>

          <!-- Content -->
          <div class="flex-1 p-4 flex flex-col justify-between">
            <div>
              <h3 
              class="text-xl font-medium mb-2"
              transition:name={service.id}
            >
              {service.title}
              </h3>
              <p
                class="text-gray-600 mb-4 line-clamp-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300"
              >
              {service.description}
              </p>
            </div>
            <div class="flex justify-end hover:translate-x-2 transition duration-300 test_3">
              <a 
                class="inline-block px-4 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition"
                href={`/${lang}/services/${service.id}`}
              >
                Learn more â†’
              </a>
            </div>
          </div>

        </div>
      ))
    }
    </div>

  </section>
</Layout>